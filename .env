# =========================
# OCI GenAI (Oracle Cloud)
# =========================
# OCI user OCID used for signing requests to Oracle Cloud.
OCI_USER_OCID=ocid1.user.oc1..aaaaaaaa5cq3iewffep5nzqb7qzoe6mpj45gt4kndvzwvuxzzavpbiucqqaq
# Path to your OCI API private key used with the fingerprint below.
OCI_KEY_FILE=/home/ubuntu/.oci/oci_api_key.pem
# Fingerprint of the public key you uploaded to OCI console for the above private key.
OCI_KEY_FINGERPRINT=de:50:15:13:af:bd:76:fa:f4:77:ad:d4:af:70:a5:d6
# Tenancy OCID of your Oracle Cloud account.
OCI_TENANCY_OCID=ocid1.tenancy.oc1..aaaaaaaafhegmvy2da7xzh2b5jbmhdkfr4cr4e37m5filt4zgxs6mfl7icua
# Region where your OCI resources live (e.g., ap-sydney-1, us-chicago-1).
OCI_REGION=us-chicago-1
# Compartment OCID where GenAI resources are located.
OCI_COMPARTMENT_OCID=ocid1.compartment.oc1..aaaaaaaacoqxp2n77ra2343maw2px4rlrtzqaw5ord6be2cbrbwlrpqwegxa
# Specific Generative AI model OCID to use for Oracle GenAI endpoints.
OCI_GENAI_MODEL_OCID=ocid1.generativeaimodel.oc1.us-chicago-1.amaaaaaask7dceyayjawvuonfkw2ua4bob4rlnnlhs522pafbglivtwlfzta

# =========================
# PostgreSQL / PGVector
# =========================
# Hostname/IP of your PostgreSQL server.
AUSLEGALSEARCH_DB_HOST=10.150.2.230
# PostgreSQL port (default 5432).
AUSLEGALSEARCH_DB_PORT=5432
# Database user for ingestion and query.
AUSLEGALSEARCH_DB_USER=postgres
# Database user password (keep secret; do not commit .env).
AUSLEGALSEARCH_DB_PASSWORD=RAbbithole1234##
# Database name/schema to use.
AUSLEGALSEARCH_DB_NAME=postgres

# Optional full SQLAlchemy DSN (overrides the above when set). Example:
# AUSLEGALSEARCH_DB_URL='postgresql+psycopg2://user:pass@host:5432/dbname'

# =========================
# Oracle 23ai (optional)
# =========================
# Uncomment and set if connecting to Oracle 23ai.
# ORACLE_DB_USER=your_oracle_db_user
# ORACLE_DB_PASSWORD=your_oracle_db_password
# ORACLE_DB_DSN=your_oracle_db_tns_or_service
# ORACLE_WALLET_LOCATION=/path/to/wallet/dir

# =========================
# Embeddings / Models
# =========================
# Sentence-Transformers or HF model name for embeddings.
AUSLEGALSEARCH_EMBED_MODEL=nomic-ai/nomic-embed-text-v1.5
# Embedding dimensionality for pgvector column (must match model, e.g., 768).
AUSLEGALSEARCH_EMBED_DIM=768
# Optional HF cache directory on fast disk for model weights.
# HF_HOME=/fast/ssd/hf_cache
# (Optional) Disable tokenizer multithreading warnings.
# TOKENIZER_PARALLELISM=false

# =========================
# Ingestion / Worker Flags
# =========================
# Auto-run create_all_tables() on import (set 0 when schema is pre-created).
AUSLEGALSEARCH_AUTO_DDL=0
# Per-GPU embedding batch size (worker adapts down on OOM automatically).
AUSLEGALSEARCH_EMBED_BATCH=32

# Include per-file metrics & timings (parse_ms, chunk_ms, embed_ms, insert_ms).
AUSLEGALSEARCH_LOG_METRICS=1
# Emit detailed error records to {child}.errors.ndjson (1=enabled).
AUSLEGALSEARCH_ERROR_DETAILS=1
# Include Python tracebacks in error records (0=omit, 1=include).
AUSLEGALSEARCH_ERROR_TRACE=1

# =========================
# Chunking / Timeouts
# =========================
# Per-stage deadlines (seconds). Stuck files are aborted and will fallback or error.
AUSLEGALSEARCH_TIMEOUT_PARSE=30
AUSLEGALSEARCH_TIMEOUT_CHUNK=60
AUSLEGALSEARCH_TIMEOUT_EMBED_BATCH=180
# Per-file DB insert deadline (seconds). Retries occur with exponential backoff.
AUSLEGALSEARCH_TIMEOUT_INSERT=120

# Enable RCTS fallback for unstructured generic text (requires langchain-text-splitters + tiktoken).
AUSLEGALSEARCH_USE_RCTS_GENERIC=1
# Character-window fallback chunker sizes, used when semantic chunking times out/errors.
AUSLEGALSEARCH_FALLBACK_CHARS_PER_CHUNK=4000
AUSLEGALSEARCH_FALLBACK_OVERLAP_CHARS=200

# =========================
# Database Pooling / Timeouts (Prod)
# =========================
# Size of SQLAlchemy connection pool per process (workers open their own pools).
AUSLEGALSEARCH_DB_POOL_SIZE=10
# Extra connections allowed beyond pool_size during bursts.
AUSLEGALSEARCH_DB_MAX_OVERFLOW=20
# Recycle connections periodically to avoid server idle timeouts (seconds).
AUSLEGALSEARCH_DB_POOL_RECYCLE=1800
# Max seconds to wait for a free pooled connection before raising.
AUSLEGALSEARCH_DB_POOL_TIMEOUT=30
# Server-side statement timeout (milliseconds) applied to new connections (optional).
# AUSLEGALSEARCH_DB_STATEMENT_TIMEOUT_MS=60000

# =========================
# API / Backend (optional, if using FastAPI/Gradio/Streamlit auth)
# =========================
# Basic auth user/pass for local FastAPI admin endpoints or internal tooling.
# FASTAPI_API_USER=legal_api
# FASTAPI_API_PASS=letmein
# Public base URL for the API/UI if needed by clients.
# AUSLEGALSEARCH_API_URL=http://localhost:8000

# =========================
# Notes
# =========================
# - Do NOT commit real secrets to source control.
# - Use environment managers (systemd, Docker secrets, cloud secret stores) in production.
# - Ensure AUSLEGALSEARCH_EMBED_DIM matches the selected embedding model.
# - If using RCTS fallback, ensure requirements are installed and consider keeping it disabled by default in prod.
